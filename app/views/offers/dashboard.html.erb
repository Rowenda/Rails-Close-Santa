<%# function for display üéÖüèª or üßëüèª %>
<% if user_signed_in? %>
<% if current_user.offers.present?%>
<% is_santa = "üéÖüèª" %>
<% else %>
<% is_santa = "üßëüèª" %>
<% end %>
<% end %>

<div class=top-message-div>
<h2 id="top-message"><%=is_santa%> <%= current_user.firstname %>'s Offers üéÅ<h2>
</div>

<div class="flexcenter">


    <div>

      <% @offers.each do |offer| %>


          <div class="user-offers-card">
              <div style="background-image: url(<%= cl_image_path offer.photo.key, height: 250, width: 500, crop: :fill %>);" class="image-left-content" >
              </div>

              <div class="user-offers-card-right-content">
                  <h4><b><%=link_to "#{offer.title}", offer_path(offer) %></b></h4>

                  <p> <b>Available:</b> in <%= offer.location %> the <%= offer.availability %><br>
                      <b>Price : </b><%= offer.price_per_hour %>$ </p>


                  <div class="if-reserve">
              <% if offer.user.id == current_user.id && offer.reservations.present?%>
                <% offer.reservations.each do |reservation| %>
                <h4> <b><%= reservation.user.firstname %> has accepted ‚úÖ</b></h4>
                  <p><b>Adress:</b> <%= link_to "#{reservation.event_adress}", reservation_path(reservation)  %>
                  <br> <b>Start at:</b> <%= reservation.start_time %> <br> <b>End:</b> <%= reservation.end_time %></p>

                    <%# - √† ajouter si necessaire
                  <p>Status: <%= reservation.status %></p>
                    <% if reservation.status == "pending" %>

                      <div id="button-dashboard-div">
                      <%= link_to "accept", reservation_accept_status_path(reservation), class:"bouton-white"  %>
                      <%= link_to "reject",
                          reservation,
                          method: :delete,
                          data: { confirm: "Are you sure?" }, class:"bouton-red"%>
                      </div>
                    <% end %>
                    <% if reservation.status == "accepted" %>
                    <a class="bouton-white" href="mailto:<%=reservation.user.email%>"> contact <%= reservation.user.firstname%> </a>

                    <% end %>
                <% end %>
                </div>
              <% end %>
          </div>








        </div>
      <% end %>
    </div>
    <%# test %>
    <h2>MY RESERVATION</h2>
    <div class='offer-dashboard'>
      <% @reservations.each do |reservation| %>
        <div class='reservation-link'>
          <p>Address: <%=link_to "#{reservation.event_adress}", reservation_path(reservation) %></p>
          <p><%= Offer.find(reservation.offer_id).availability.to_time.strftime('%e %B %Y') %> <%= reservation.reservation_start.strftime("at %I:%M %p") %></p>
          <p><%= Offer.find(reservation.offer_id).availability.to_time.strftime('%e %B %Y') %> <%= reservation.reservation_end.strftime("at %I:%M %p") %></p>
          <p>Status: <%= reservation.status %></p>
                  <% if reservation.status == "pending" %>
          <%= link_to "Cancel",
              reservation,
              method: :delete,
              data: { confirm: "Are you sure?" } %>
        <% end %>
        <% if reservation.status == "rejected" %>
          <%= link_to "Delete",
              reservation,
              method: :delete,
              data: { confirm: "Are you sure?" } %>
        <% end %>
        </div>
      <% end %>
    </div>
    <%= link_to "Back to offers", offers_path %>
    <%= link_to "Create an offer", new_offer_path %>
  </div>
</div>
