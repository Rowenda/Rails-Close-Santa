<%# ajout de style par virgile, suprimer le style dans le html pour jeudi %>


<h1 class='container' style="background-color:white; border-radius:1rem; width:50vw; margin-top:2rem">dashboard</h1>

<div class='container' style="background-color:white; border-radius:1rem; width:50vw; padding:2rem 0;">
  <h2>MY OFFERS</h2>
  <div>
    <% @offers.each do |offer| %>
      <div class='offer-link'>
        <p> offer : <%=link_to "#{offer.title}", offer_path(offer) %>
          <%= offer.location %>
          <%= offer.price_per_hour %>
          <%= offer.availability %>
          <% if offer.user.id == current_user.id && offer.reservations.present?%>
            <p>My offer's reservations</p>
            <% offer.reservations.each do |reservation| %>
              <p>Adress: <%= link_to "#{reservation.event_adress}", reservation_path(reservation)  %>
              <p>Time: <%= reservation.start_time %> <%= reservation.end_time %></p>
              <p>Status: <%= reservation.status %></p>
                <% if reservation.status == "pending" %>
                  <%= link_to "Accept", reservation_accept_status_path(reservation) %>
                  <%= link_to "Reject",
                      reservation,
                      method: :delete,
                      data: { confirm: "Are you sure?" } %>
                <% end %>
            <% end %>
          <% end %>
        </p>
      </div>
    <% end %>
  </div>
  <%# test %>
  <h2>MY RESERVATIONS</h2>
  <div class='offer-dashboard'>
    <% @reservations.each do |reservation| %>
      <div class='reservation-link'>
        <p>Address: <%=link_to "#{reservation.event_adress}", reservation_path(reservation) %></p>
        <p><%= reservation.start_time %></p>
        <p><%= reservation.end_time %></p>
        <p>Status: <%= reservation.status %></p>
      </div>
    <% end %>
  </div>
  <%= link_to "Back to offers", offers_path %>
  <%= link_to "Create an offer", new_offer_path %>
</div>
